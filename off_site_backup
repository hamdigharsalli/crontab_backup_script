#
# Second backup of local disks (gets sent offsite), but only if the offsite
# disk appears to be mounted.
#

if [ -e $backup_1_ofs ]; then

	# root volume
	backup_local_disk $target_1 $backup_1_ofs
	rc201=$?

	# firewire_disk
	backup_local_disk $target_2 $backup_3_ofs
	rc202=$?

	#
	# Second backup of remote files (gets sent offsite)
	#

	blank_line
	report "Checking if target directories exist in the $backup_2_ofs volume..."

	create_directory_if_it_does_not_exist $backup_2_ofs hpwtdogmom.org
	create_directory_if_it_does_not_exist $backup_2_ofs applied-math.org
	create_directory_if_it_does_not_exist $backup_2_ofs mail_spool
	create_directory_if_it_does_not_exist $backup_2_ofs daily_archive

	backup_remote_disk $target_3 $backup_2_ofs/hpwtdogmom.org/
	rc203=$?

	backup_remote_disk $target_4 $backup_2_ofs/hpwtdogmom.org/
	rc204=$?

	backup_remote_disk $target_5 $backup_2_ofs/hpwtdogmom.org/
	rc205=$?

	backup_remote_disk $target_6 $backup_2_ofs/applied-math.org/
	rc206=$?

	backup_remote_disk $target_7 $backup_2_ofs/applied-math.org/
	rc207=$?

	backup_remote_disk $target_8 $backup_2_ofs/applied-math.org/
	rc208=$?

	backup_remote_disk $target_9 $backup_2_ofs/applied-math.org/
	rc209=$?

	backup_remote_disk $target_10 $backup_2_ofs/mail_spool/
	rc210=$?

	backup_remote_disk $target_11 $backup_2_ofs/mail_spool/
	rc211=$?

	backup_remote_disk $target_12 $backup_2_ofs/mail_spool/
	rc212=$?

	#
	# snapshot M's webmail and the mail spool just in case...
	#

	snapshot_M_email $backup_2_ofs
	rc213=$?


	if [ "$global_failure_code" != "F" ] ; then
		offsite_backup_success_code="S"
	fi

	if [ "$global_failure_code" == "F" ] ; then
		offsite_backup_success_code="F"
	fi
fi
